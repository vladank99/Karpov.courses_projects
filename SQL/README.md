### Проект SQL karpov.courses модуль JOIN 
Тренировочный проект, который содержит 3 таблицы по мобильных приложениям (выполнено в ClickHouse)

---

### Общее описание:
Проанализровать данные 3х таблиц по мобильным приложениям


### Основные функции: 
  - JOIN
  - Подзапросы
  - Агрегирующие функции


### Описание таблиц:
- **installs** содержит данные об установках приложения по дням.
  - DeviceID — идентификатор устройства, на которое было установлено приложение
  - InstallationDate — дата установки приложения
  - InstallCost — цена установки приложения в рублях
  - Platform — платформа, на которой было установлено приложение (iOS/ Android)
  - Source — источник установки приложения (магазин приложения/ рекламная система/ переход с сайта)

- **events** — содержит данные о том, как активно пользователи просматривают товары в приложении по дням  
  - DeviceID — идентификатор устройства, на котором используется приложение
  - AppPlatform — платформа, на которой используется приложение (iOS/ Android)
  - EventDate — дата, за которую собрана статистика
  - events — количество просмотров всех товаров за этот день у этого DeviceID

- **checks** — содержит данные о покупках пользователей в приложении по дням
  - UserID — идентификатор пользователя;
  - Rub — суммарный чек пользователя на дату
  - BuyDate — дата, за которую собрана статистика

--- 
### Описание заданий: 
- **Задание №1** | **Решение** 
    У пользователя может быть два идентификатора – UserID и DeviceID. В таблице checks есть только UserID, в остальных – только DeviceID. Во вспомогательной таблице devices есть и UserID, и DeviceID. Давайте с помощью JOIN дополним таблицу events (left) данными о UserID пользователей из таблицы devices (right). Для некоторых DeviceID не будет пары UserID из таблицы devices – подумайте, какой вид JOIN подойдет, чтобы не потерять те строки, где DeviceID есть в events, но нет в devices. Укажите UserID из первой строки результирующей таблицы, используя сортировку по убыванию по полю DeviceID.


- **Задание №2** | **Решение**    
      Давайте проверим, пользователи пришедшие из какого источника совершили наибольшее число покупок. В качестве ответа выберите название Source, юзеры 
      которого совершили больше всего покупок.
    

- **Задание №3** | **Решение**   
      Теперь выясним, сколько всего уникальных юзеров что-то купили в нашем приложении. Объедините нужные таблицы, посчитайте число уникальных UserID для
      каждого источника (Source), и в качестве ответа укажите число пользователей, пришедших из Source_7.
    
- **Задание №4** | **Решение**   
      Самое время посмотреть на общую выручку, а также минимальный, максимальный и средний чек. Рассчитайте нужные показатели.
    
- **Задание №5** | **Решение**    
      Выведите идентификаторы устройств пользователей, которые совершили как минимум одну покупку за последний месяц (октябрь 2019). Используйте сортировку
      по возрастанию DeviceID и укажите минимальное значение.
    
- **Задание №6** | **Решение**     
      Проверим, сколько товаров (events) в среднем просматривают пользователи с разных платформ (Platform), и пришедшие из разных источников  (Source). Для
      этого объедините таблицы events и installs, и посчитайте, сколько просмотров в среднем приходится на каждую пару платформа-канал привлечения.
      Отсортируйте полученную табличку по убыванию среднего числа просмотров. В качестве ответа укажите платформу и источник, пользователи которого в
      среднем просматривали товары бóльшее число раз.
    
- **Задание №7** | **Решение**    
      Давайте посчитаем число уникальных DeviceID в инсталлах, для которых присутствуют просмотры в таблице events с разбивкой по платформам (поле
      Platform). 
    
- **Задание №8** | **Решение**    
      Давайте теперь посчитаем конверсию из инсталла в просмотр с разбивкой по платформе инсталла – в данном случае это доля DeviceID, для которых есть
      просмотры, от всех DeviceID в инсталлах. 
    
- **Задание №9** | **Решение**    
      Представим, что в логирование DeviceID в событиях закралась ошибка - часть ID была записана в базу некорректно. Это привело к тому, что в таблице с
      событиями появились DeviceID, для которых нет инсталлов. Нам надо отобрать примеры DeviceID из таблицы event, которых нет в таблице installs, чтобы
      отправить их команде разработчиков на исправление. 

---
#### Все решения отправлены в виде текстового файла 
